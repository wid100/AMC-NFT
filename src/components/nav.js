import { useEffect, useState } from "react";
import { useHistory, useLocation } from "react-router-dom";
import Web3 from "web3";
import Web3Modal from "web3modal";
import { Link } from "react-router-dom";
import NavLink from "./NavLink";
import Sidebar from "./Sidebar";
const Navigation = () => {
  const [sidebarActive, setSidebarActive] = useState(false);

  const toggleSidebar = () => {
    setSidebarActive(!sidebarActive);
  };
  // ==========================mint value ==================
  const [walletConnected, setWalletConnected] = useState(false);

  const [pagelocation, setPageLocation] = useState(useLocation().pathname);

  // Connect Wallet
  const connectWallet = async () => {
    if (Web3.givenProvider) {
      const providerOptions = {};

      const web3Modal = new Web3Modal({
        network: "mainnet",
        cacheProvider: true,
        providerOptions,
      });

      const provider = await web3Modal.connect();
      const web3 = new Web3(provider);

      web3.eth.net.getId();

      const addresses = await web3.eth.getAccounts();
      const address = addresses[0];

      const { ethereum } = window;

      const networkId = await ethereum.request({
        method: "net_version",
      });

      setWalletConnected(true);
    } else {
      window.open(
        `https://metamask.app.link/dapp/apemafiaclub.com${pagelocation}`
      );
    }
  };

  return (
    <nav id="navbar">
      <div className="nav-container">
        <ul className="nav-items">
          <li className="nav-icons">
            <a
              href="https://discord.gg/B6UmHqZB3B"
              target="_BLANK"
              className="icon-wrapper"
            >
              <svg
                width="27"
                height="27"
                viewBox="0 0 27 27"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fillRule="evenodd"
                  clip-rule="evenodd"
                  d="M13.478 26.9559C20.9216 26.9559 26.9559 20.9216 26.9559 13.478C26.9559 6.03429 20.9216 0 13.478 0C6.03429 0 0 6.03429 0 13.478C0 20.9216 6.03429 26.9559 13.478 26.9559ZM16.1348 5.83063C17.523 6.06538 18.8506 6.4782 20.089 7.03673C20.0998 7.04104 20.1087 7.04908 20.1141 7.05939C22.3086 10.2341 23.3916 13.8168 22.9869 17.9402C22.9859 17.9489 22.9831 17.9573 22.9787 17.9648C22.9742 17.9724 22.9682 17.9789 22.961 17.9839C21.4891 19.0562 19.8465 19.8721 18.1026 20.3969C18.0903 20.4006 18.0772 20.4004 18.065 20.3963C18.0529 20.3923 18.0422 20.3845 18.0346 20.3742C17.6679 19.8716 17.3344 19.3422 17.043 18.7861C17.0391 18.7784 17.0368 18.77 17.0363 18.7614C17.0358 18.7527 17.0372 18.7441 17.0404 18.7361C17.0435 18.728 17.0483 18.7207 17.0545 18.7147C17.0607 18.7087 17.0681 18.704 17.0762 18.7011C17.6048 18.5052 18.1083 18.2696 18.5923 17.9912C18.601 17.9861 18.6082 17.9789 18.6134 17.9703C18.6185 17.9617 18.6215 17.9519 18.622 17.9419C18.6225 17.9319 18.6204 17.9219 18.6161 17.9128C18.6118 17.9038 18.6053 17.8959 18.5972 17.89C18.4944 17.8147 18.3932 17.7362 18.2961 17.6569C18.2872 17.6498 18.2764 17.6453 18.2651 17.6441C18.2538 17.6428 18.2424 17.6447 18.2321 17.6496C15.0906 19.0775 11.648 19.0775 8.4692 17.6496C8.45896 17.645 8.44764 17.6433 8.43649 17.6447C8.42534 17.6461 8.41481 17.6506 8.40607 17.6577C8.30893 17.7362 8.20694 17.8147 8.10495 17.89C8.09693 17.896 8.09053 17.904 8.08634 17.9131C8.08215 17.9223 8.08029 17.9323 8.08093 17.9423C8.08158 17.9524 8.0847 17.9621 8.09002 17.9706C8.09534 17.9791 8.10269 17.9862 8.11142 17.9912C8.59717 18.2673 9.10383 18.505 9.62674 18.7019C9.66073 18.7148 9.67692 18.7537 9.65992 18.7861C9.37499 19.343 9.04149 19.8732 8.66752 20.375C8.65962 20.385 8.6489 20.3923 8.63677 20.3961C8.62464 20.3998 8.61166 20.3998 8.59953 20.3961C6.85865 19.8698 5.21872 19.0543 3.74842 17.9839C3.74144 17.9786 3.73561 17.9719 3.7313 17.9642C3.72699 17.9566 3.72427 17.9481 3.72333 17.9394C3.38417 14.3729 4.07464 10.7611 6.59368 7.05778C6.59988 7.04802 6.60892 7.04039 6.61959 7.03592C7.85887 6.47658 9.18639 6.06376 10.5738 5.82901C10.5863 5.82703 10.5992 5.82891 10.6106 5.8344C10.622 5.8399 10.6315 5.84875 10.6378 5.85977C10.8226 6.18212 10.9893 6.51451 11.1372 6.85541C12.6095 6.63543 14.1064 6.63543 15.5787 6.85541C15.7115 6.54781 15.9009 6.15846 16.0709 5.85977C16.0772 5.84888 16.0867 5.84023 16.0982 5.83501C16.1096 5.82979 16.1224 5.82826 16.1348 5.83063ZM8.38907 13.8411C8.38907 14.9023 9.17829 15.7676 10.1351 15.7676C11.1072 15.7676 11.8811 14.9031 11.8811 13.8411C11.8965 12.7863 11.1145 11.9145 10.1351 11.9145C9.16291 11.9145 8.38907 12.7791 8.38907 13.8411ZM14.8445 13.8411C14.8445 14.9023 15.6329 15.7676 16.5905 15.7676C17.5708 15.7676 18.3365 14.9031 18.3365 13.8411C18.3519 12.7863 17.57 11.9145 16.5905 11.9145C15.6176 11.9145 14.8445 12.7791 14.8445 13.8411Z"
                  fill="white"
                />
              </svg>
            </a>
            <a
              href="https://twitter.com/apemafiaclub"
              target="_BLANK"
              className="icon-wrapper"
            >
              <svg
                width="27"
                height="27"
                viewBox="0 0 27 27"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M13.5 0C6.04487 0 0 6.04487 0 13.5C0 20.9551 6.04487 27 13.5 27C20.9551 27 27 20.9551 27 13.5C27 6.04487 20.9551 0 13.5 0ZM19.9878 10.1762C19.9969 10.3179 19.9969 10.4655 19.9969 10.6102C19.9969 15.0338 16.6279 20.1295 10.4715 20.1295C8.5731 20.1295 6.81328 19.578 5.33069 18.6288C5.6019 18.6589 5.86105 18.671 6.13828 18.671C7.70525 18.671 9.14565 18.1406 10.2938 17.2426C8.82321 17.2125 7.58772 16.2482 7.16585 14.9223C7.68114 14.9977 8.1452 14.9977 8.67556 14.8621C7.91837 14.7082 7.23779 14.297 6.74945 13.6982C6.2611 13.0995 5.9951 12.3501 5.99665 11.5775V11.5353C6.43962 11.7854 6.96094 11.9391 7.50636 11.9602C7.04785 11.6546 6.67183 11.2406 6.41163 10.7549C6.15143 10.2692 6.0151 9.72679 6.01473 9.17578C6.01473 8.55201 6.17746 7.98248 6.46976 7.48828C7.3102 8.52289 8.35894 9.36907 9.54783 9.97182C10.7367 10.5746 12.0391 10.9204 13.3704 10.9868C12.8973 8.71172 14.5969 6.87054 16.64 6.87054C17.6042 6.87054 18.4721 7.27433 19.0838 7.92522C19.8402 7.78359 20.5634 7.50033 21.2083 7.12065C20.9581 7.89509 20.4338 8.549 19.7377 8.96183C20.4127 8.88951 21.0636 8.70268 21.6663 8.44051C21.2113 9.10949 20.6417 9.70313 19.9878 10.1762Z"
                  fill="white"
                />
              </svg>
            </a>
            <a
              href="https://instagram.com/apemafiaclub"
              target="_BLANK"
              className="icon-wrapper"
            >
              <svg
                width="28"
                height="27"
                viewBox="0 0 28 27"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fillRule="evenodd"
                  clip-rule="evenodd"
                  d="M14.3178 26.9559C21.7615 26.9559 27.7958 20.9216 27.7958 13.478C27.7958 6.03429 21.7615 0 14.3178 0C6.87413 0 0.839844 6.03429 0.839844 13.478C0.839844 20.9216 6.87413 26.9559 14.3178 26.9559ZM10.5406 4.35127C11.5178 4.30859 11.8306 4.29736 14.3177 4.29736H14.3154C16.806 4.29736 17.1165 4.30859 18.0948 4.35127C19.0698 4.39507 19.7365 4.5467 20.3208 4.76908C20.9326 4.99444 21.4866 5.34827 21.9441 5.80576C22.4104 6.25466 22.7712 6.79777 23.0016 7.39729C23.2272 7.96785 23.3819 8.62153 23.4277 9.57735C23.4713 10.5365 23.4827 10.842 23.4827 13.2827C23.4827 15.7233 23.4713 16.0288 23.4277 16.9869C23.3819 17.9438 23.2272 18.5963 23.0016 19.168C22.7667 19.7588 22.4539 20.2597 21.9441 20.7596C21.4868 21.2168 20.9332 21.5706 20.3219 21.7962C19.7388 22.0186 19.0709 22.1691 18.096 22.2141C17.1176 22.2567 16.8072 22.268 14.3177 22.268C11.8283 22.268 11.5167 22.2567 10.5383 22.2141C9.56221 22.1702 8.89775 22.0186 8.31348 21.7962C7.71088 21.5671 7.19993 21.2594 6.69127 20.7596C6.18147 20.2597 5.86871 19.7588 5.63386 19.168C5.40703 18.5963 5.25351 17.9438 5.20769 16.9869C5.16415 16.0288 5.1527 15.7233 5.1527 13.2838C5.1527 10.842 5.16415 10.5365 5.20769 9.57622C5.25237 8.62153 5.40703 7.96785 5.63386 7.39729C5.86425 6.79779 6.22509 6.25469 6.69127 5.80576C7.14894 5.34844 7.70297 4.99464 8.31463 4.76908C8.89775 4.5467 9.56336 4.39619 10.5406 4.35127ZM14.3189 5.91696H13.4963V5.91471C11.7882 5.91583 11.4605 5.92707 10.615 5.96525C9.72146 6.00569 9.23686 6.1517 8.91379 6.27525C8.48533 6.4381 8.18059 6.63241 7.85981 6.9469C7.53904 7.26138 7.3397 7.56127 7.17358 7.98021C7.04756 8.29694 6.89863 8.77316 6.85739 9.64923C6.81386 10.5961 6.80469 10.8791 6.80469 13.2782C6.80469 15.6784 6.81386 15.9625 6.85739 16.9094C6.89749 17.7854 7.04756 18.2616 7.17244 18.5773C7.31991 18.9677 7.55479 19.3208 7.85981 19.6106C8.15553 19.9088 8.51568 20.1384 8.91379 20.2822C9.23686 20.4058 9.72146 20.5518 10.615 20.5922C11.5808 20.6349 11.8718 20.645 14.3189 20.645C16.7659 20.645 17.0558 20.6349 18.0215 20.5922C18.9163 20.5518 19.402 20.4058 19.7228 20.2822C20.1512 20.1194 20.456 19.925 20.7768 19.6106C21.0815 19.3213 21.316 18.9685 21.463 18.5784C21.5879 18.2616 21.7379 17.7865 21.778 16.9105C21.8227 15.9637 21.8319 15.6784 21.8319 13.2804C21.8319 10.8825 21.8227 10.5983 21.778 9.65147C21.7379 8.77541 21.589 8.29919 21.463 7.98358C21.2969 7.56351 21.0987 7.26475 20.7779 6.95027C20.4571 6.63578 20.1512 6.44035 19.7239 6.27749C19.4009 6.15507 18.9151 6.00793 18.0215 5.96862C17.0558 5.92482 16.7659 5.91696 14.3189 5.91696ZM18.7898 7.49059C18.9232 7.43641 19.0663 7.40852 19.2107 7.40852C19.5024 7.40852 19.7821 7.52212 19.9884 7.72433C20.1946 7.92653 20.3105 8.20079 20.3105 8.48675C20.3105 8.77272 20.1946 9.04697 19.9884 9.24918C19.7821 9.45139 19.5024 9.56499 19.2107 9.56499C19.0663 9.56499 18.9232 9.5371 18.7898 9.48291C18.6564 9.42873 18.5351 9.34931 18.433 9.24918C18.3309 9.14906 18.2499 9.0302 18.1946 8.89938C18.1393 8.76856 18.1109 8.62835 18.1109 8.48675C18.1109 8.34516 18.1393 8.20495 18.1946 8.07413C18.2499 7.94331 18.3309 7.82445 18.433 7.72433C18.5351 7.6242 18.6564 7.54478 18.7898 7.49059ZM12.495 8.99907C13.0746 8.77146 13.6946 8.65916 14.3189 8.66871C15.5545 8.68761 16.7329 9.18209 17.5999 10.0454C18.4669 10.9088 18.9528 12.0717 18.9528 13.2832C18.9528 14.4947 18.4669 15.6577 17.5999 16.521C16.7329 17.3844 15.5545 17.8788 14.3189 17.8977C13.6946 17.9073 13.0746 17.795 12.495 17.5674C11.9154 17.3398 11.3878 17.0014 10.9429 16.5719C10.4979 16.1425 10.1446 15.6306 9.90343 15.066C9.66225 14.5013 9.53804 13.8953 9.53804 13.2832C9.53804 12.6711 9.66225 12.0651 9.90343 11.5005C10.1446 10.9359 10.4979 10.424 10.9429 9.99451C11.3878 9.56507 11.9154 9.22669 12.495 8.99907ZM16.4793 11.1645C15.9063 10.6028 15.1292 10.2872 14.3189 10.2872C13.5085 10.2872 12.7314 10.6028 12.1584 11.1645C11.5854 11.7263 11.2635 12.4882 11.2635 13.2827C11.2635 14.0771 11.5854 14.839 12.1584 15.4008C12.7314 15.9625 13.5085 16.2781 14.3189 16.2781C15.1292 16.2781 15.9063 15.9625 16.4793 15.4008C17.0523 14.839 17.3742 14.0771 17.3742 13.2827C17.3742 12.4882 17.0523 11.7263 16.4793 11.1645Z"
                  fill="white"
                />
              </svg>
            </a>
          </li>
          <NavLink title="Home" to="hero" />
          <NavLink title="Roadmap" to="roadmap" />
        </ul>
        <Link to="/">
          <div className="logo-wrapper">
            <img src="/assets/logo.png" alt="logo" />
          </div>
        </Link>
        <ul className="nav-items">
          <NavLink title="Description" to="community" />
          <NavLink title="Team" to="team" />
          <NavLink title="FAQ" to="faq" />

          <button className="nav-btn" onClick={connectWallet}>
            <div className="hover-btn">
              {walletConnected ? "CONNECTED" : "CONNECT WALLET"}
              <svg
                className="svg-fill"
                width="200"
                height="50"
                viewBox="0 0 198 48"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M176.516 0H3C1.34315 0 0 1.34315 0 3V45C0 46.6569 1.34314 48 3 48H195C196.657 48 198 46.6569 198 45V19.2057C198 18.3416 197.627 17.5195 196.978 16.9499L178.494 0.744216C177.947 0.264492 177.244 0 176.516 0Z"
                  fill="#B33A39"
                />
              </svg>
            </div>
            <svg
              className="svg-outline"
              width="198"
              height="48"
              viewBox="0 0 200 50"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M177.516 1H4C2.34315 1 1 2.34315 1 4V46C1 47.6569 2.34314 49 4 49H196C197.657 49 199 47.6569 199 46V20.2057C199 19.3416 198.627 18.5195 197.978 17.9499L179.494 1.74422C178.947 1.26449 178.244 1 177.516 1Z"
                stroke="white"
              />
            </svg>
          </button>
        </ul>
        <div className="toggle-sidenav-btn" onClick={toggleSidebar}>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            className="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              strokeLinecap="round"
              strokeLinejoin="round"
              strokeWidth={2}
              d="M4 6h16M4 12h16m-7 6h7"
            />
          </svg>
        </div>
        <Sidebar active={sidebarActive} toggleSidebar={toggleSidebar} />
      </div>
    </nav>
  );
};

export default Navigation;
